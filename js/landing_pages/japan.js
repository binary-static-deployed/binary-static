/* global toggleMobileMenu:false */window.onload=function(){initForm();window.onresize=checkWidth;// Store gclid
var gclid=getParamValue(document.referrer,'gclid');if(gclid){localStorage.setItem('gclid',gclid)}commonOnload()};function initForm(){var signup_forms=document.querySelectorAll('.signup-form');var ws=wsConnect();function sendVerifyEmail(val){var trimmed_email=trimEmail(val);wsSend(ws,{verify_email:trimmed_email,type:'account_opening'})}function verifySubmit(msg){var response=JSON.parse(msg.data);setValidationStyle(el_email,response.error);if(!response.error){signup_forms.forEach(function(el){el.querySelector('.signup-form-input').classList.add('invisible');el.querySelector('.signup-form-success').classList.remove('invisible')})}}function trimEmail(str){return str.replace(/\s/g,'')}var validation_set=false;// To prevent validating before submit
signup_forms.forEach(function(form){form.addEventListener('submit',handleSubmit)});var el_email=void 0;function handleSubmit(e){e.preventDefault();var el_form=this;el_email=el_form.querySelector('input[type="email"]');if(!validateEmail(el_email.value)){if(!validation_set){['input','change'].forEach(function(evt){el_email.addEventListener(evt,function(){setValidationStyle(!validateEmail(el_email.value))})});setValidationStyle(!validateEmail(el_email.value));validation_set=true}var to=this.offsetTop-50;scrollTo(to,500);// Scroll to nearest form
return false}if(ws.readyState===1){sendVerifyEmail(el_email.value)}else{ws=wsConnect();ws.onopen=sendVerifyEmail(el_email.value);ws.onmessage=verifySubmit}return true}ws.onmessage=verifySubmit}function validateEmail(email){return /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,63}$/.test(email)}function setValidationStyle(has_error){document.querySelectorAll('input[type="email"]').forEach(function(el){el.classList[has_error?'add':'remove']('error-field')});document.querySelectorAll('.error-msg').forEach(function(el){el.classList[has_error?'remove':'add']('invisible')})}
//# sourceMappingURL=japan.js.map
