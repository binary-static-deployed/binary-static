{"version":3,"sources":["../../../src/javascript/lib/landing_pages/common.js"],"names":["checkWidth","mq","window","matchMedia","matches","document","getElementById","scrollHeight","toggleMobileMenu","toggleButton","navbar","navbar_item","getElementsByClassName","el_language_dropdown","addEventListener","e","stopPropagation","classList","toggle","test","toggleAllSiblings","parentNode","filterById","remove","collapseMenu","checkBrowser","isFirefox","InstallTrigger","isIE","documentMode","scrollTo","to","duration","start","pageYOffset","change","currentTime","increment","animateScroll","val","Math","easeInOutQuad","body","scrollTop","documentElement","setTimeout","current_time","start_value","change_in_value","getParamValue","url","key","regex","RegExp","results","exec","decodeURIComponent","replace","getLanguage","all_languages","language","location","href","toLowerCase","split","slice","find","l","indexOf","wsConnect","WebSocket","wsSend","ws","request","send","JSON","stringify","setSession","value","sessionStorage","setItem","NodeList","prototype","forEach","callback","thisArg","i","length","call","elem","id","filter","class_name","firstChild","nodeType","nextSibling"],"mappings":"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","file":"common.js","sourcesContent":["// Check view width, add navbar height as offset if on desktop\nfunction checkWidth() {\n    let mq = window.matchMedia(\"(max-width: 1199px)\");\n    return (mq.matches ? 50 : document.getElementById('navigation').scrollHeight);\n}\n\nfunction toggleMobileMenu() {\n    const toggleButton = document.getElementById('toggle-menu');\n    const navbar       = document.getElementById('navigation');\n    const navbar_item  = document.getElementsByClassName('navbar-collapse')[0];\n    const el_language_dropdown = document.getElementsByClassName('language-dropdown')[0];\n    toggleButton.addEventListener('click', function (e) {\n        e.stopPropagation();\n        navbar.classList.toggle('expand');\n        navbar_item.classList.toggle('expand');\n        if (/show/.test(el_language_dropdown.classList)) {\n            toggleAllSiblings(el_language_dropdown.parentNode, filterById, 'invisible');\n            el_language_dropdown.classList.remove('show');\n        }\n    });\n}\n\nfunction collapseMenu() {\n    const navbar      = document.getElementById('navigation');\n    const navbar_item = document.getElementsByClassName('navbar-collapse')[0];\n    if (navbar && navbar_item) {\n        navbar.classList.remove('expand');\n        navbar_item.classList.remove('expand');\n    }\n}\n\nfunction checkBrowser() {\n    const isFirefox = typeof InstallTrigger !== 'undefined';   // Firefox 1.0+\n    const isIE = /*@cc_on!@*/false || !!document.documentMode; // Internet Explorer 6-11\n    return (isFirefox || isIE);\n}\n\n// scrollTo function with animation\n// - Gist reference: https://gist.github.com/andjosh/6764939\nfunction scrollTo(to, duration) {\n    if (!duration) duration = 1000;\n    let start = window.pageYOffset,\n        change = to - start,\n        currentTime = 0,\n        increment = 20;\n\n    const animateScroll = function(){\n        currentTime += increment;\n        let val = Math.easeInOutQuad(currentTime, start, change, duration);\n        document.body.scrollTop = val;\n        document.documentElement.scrollTop = val;\n        if(currentTime < duration) {\n            setTimeout(animateScroll, increment);\n        }\n    };\n    animateScroll();\n}\n\nMath.easeInOutQuad = function (current_time, start_value, change_in_value, duration) {\n    current_time /= duration / 2;\n    if (current_time < 1) return change_in_value / 2 * current_time * current_time + start_value;\n    current_time--;\n    return -change_in_value / 2 * (current_time * (current_time - 2) - 1) + start_value;\n};\n\nfunction getParamValue(url, key) {\n    const regex   = new RegExp('[?&]' + key + '(=([^&#]*)|&|#|$)');\n    const results = regex.exec(url);\n    if (!results || !results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\nfunction getLanguage() {\n    let all_languages = [ 'en', 'de', 'es', 'fr', 'id', 'it', 'ja', 'pl', 'pt', 'ru', 'th', 'vi', 'zh_cn', 'zh_tw' ];\n    let language = window.location.href.toLowerCase().split('/').slice(3).find(function(l) { return all_languages.indexOf(l) >= 0; });\n    return language || 'en';\n}\n\nfunction wsConnect() {\n    return new WebSocket('wss://frontend.binaryws.com/websockets/v3?app_id=1&l=' + getLanguage());\n}\n\nfunction wsSend(ws, request) {\n    if (ws && request && typeof request === 'object') {\n        ws.send(JSON.stringify(request));\n    }\n}\n\nfunction setSession(key, value) {\n    if (typeof sessionStorage !== 'undefined') {\n        try {\n            sessionStorage.setItem(key, value);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n}\n\n// NodeList foreach polyfill\nif (window.NodeList && !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = function (callback, thisArg) {\n        thisArg = thisArg || window;\n        for (let i = 0; i < this.length; i++) {\n            callback.call(thisArg, this[i], i, this);\n        }\n    };\n}\n\nfunction filterById(elem) {\n    return !((/^(language)$/i.test(elem.id)));\n}\n\nfunction toggleAllSiblings(elem, filter, class_name) {\n    elem = elem.parentNode.firstChild;\n    do {\n        if (elem.nodeType === 3) continue; // text node\n        if (!filter || filter(elem)) {\n            elem.classList.toggle(class_name);\n        }\n    } while (elem = elem.nextSibling)\n}\n\n"]}